# 人才简历智能筛选系统 - 需求分析报告

## 一、需求文档要求汇总

### 1.1 核心功能模块（五大模块）

| 模块        | 功能要求                             | 分值  |
| --------- | -------------------------------- | --- |
| 人才简历基础管理  | 筛选条件新增、修改、逻辑删除、分页查询（支持多状态、多条件组合） | 25分 |
| 简历解析与存储   | PDF解析、文本提取、图片提取、MinIO存储、图片地址回传   | 15分 |
| 智能信息提取与入库 | LLM条件筛选、实体信息提取、入库、分页查询           | 20分 |
| 向量化存储与检索  | LangChain向量化、ChromaDB存储、向量检索     | 20分 |
| 多维度数据分析   | RAG查询、按学校/学历/专业维度查询、数据可视化        | 20分 |

### 1.2 非功能性需求

* 支持 PDF、Word 等常见简历格式

* 系统响应时间 ≤ 3秒（除大模型调用外）

* 支持高并发上传与解析（至少50份/分钟）

* 数据安全性：敏感信息加密存储

* 支持横向扩展

***

## 二、已实现功能检查

### 2.1 人才简历基础管理模块 ✅ 已完整实现

| 需求项           | 实现状态  | 实现位置                                                        |
| ------------- | ----- | ----------------------------------------------------------- |
| 新增筛选条件        | ✅ 已实现 | [conditions.py:54-107](src/api/v1/conditions.py#L54-L107)   |
| 修改筛选条件        | ✅ 已实现 | [conditions.py:110-188](src/api/v1/conditions.py#L110-L188) |
| 逻辑删除          | ✅ 已实现 | [conditions.py:191-253](src/api/v1/conditions.py#L191-L253) |
| 分页查询（多状态、多条件） | ✅ 已实现 | [conditions.py:256-345](src/api/v1/conditions.py#L256-L345) |
| 自然语言解析（额外功能）  | ✅ 已实现 | [conditions.py:348-394](src/api/v1/conditions.py#L348-L394) |

**前端实现：** [conditions.js](frontend-new/js/pages/conditions.js) 完整实现了条件管理界面

### 2.2 简历解析与存储模块 ✅ 已完整实现

| 需求项      | 实现状态  | 实现位置                                                                             |
| -------- | ----- | -------------------------------------------------------------------------------- |
| PDF文件解析  | ✅ 已实现 | [parse\_extract\_node.py:52-118](src/workflows/parse_extract_node.py#L52-L118)   |
| DOCX文件解析 | ✅ 已实现 | [parse\_extract\_node.py:121-185](src/workflows/parse_extract_node.py#L121-L185) |
| 文本提取     | ✅ 已实现 | 同上                                                                               |
| 图片提取     | ✅ 已实现 | 同上                                                                               |
| 人脸检测过滤   | ✅ 已实现 | [face\_detector.py](src/utils/face_detector.py)                                  |
| MinIO存储  | ✅ 已实现 | [store\_node.py:27-68](src/workflows/store_node.py#L27-L68)                      |
| 图片地址回传   | ✅ 已实现 | [store\_node.py:269-274](src/workflows/store_node.py#L269-L274)                  |

### 2.3 智能信息提取与入库模块 ✅ 已完整实现

| 需求项        | 实现状态  | 实现位置                                                                             |
| ---------- | ----- | -------------------------------------------------------------------------------- |
| LLM条件筛选    | ✅ 已实现 | [filter\_node.py:139-207](src/workflows/filter_node.py#L139-L207)                |
| 快速预筛选      | ✅ 已实现 | [filter\_node.py:210-331](src/workflows/filter_node.py#L210-L331)                |
| 实体信息提取     | ✅ 已实现 | [parse\_extract\_node.py:226-307](src/workflows/parse_extract_node.py#L226-L307) |
| MySQL入库    | ✅ 已实现 | [store\_node.py:137-216](src/workflows/store_node.py#L137-L216)                  |
| 分页查询（姓名）   | ✅ 已实现 | [talents.py:676-810](src/api/v1/talents.py#L676-L810)                            |
| 分页查询（专业）   | ✅ 已实现 | 同上                                                                               |
| 分页查询（院校）   | ✅ 已实现 | 同上                                                                               |
| 分页查询（选拔日期） | ✅ 已实现 | 同上                                                                               |

### 2.4 向量化存储与检索模块 ✅ 已完整实现

| 需求项          | 实现状态  | 实现位置                                                          |
| ------------ | ----- | ------------------------------------------------------------- |
| LangChain向量化 | ✅ 已实现 | [embedding.py](src/utils/embedding.py)                        |
| ChromaDB存储   | ✅ 已实现 | [store\_node.py:71-134](src/workflows/store_node.py#L71-L134) |
| 向量检索         | ✅ 已实现 | [rag\_service.py:98-151](src/utils/rag_service.py#L98-L151)   |
| 批量向量化        | ✅ 已实现 | [talents.py:1002-1094](src/api/v1/talents.py#L1002-L1094)     |

### 2.5 多维度数据分析与查询模块 ✅ 已完整实现

| 需求项     | 实现状态  | 实现位置                                                          |
| ------- | ----- | ------------------------------------------------------------- |
| RAG智能查询 | ✅ 已实现 | [rag\_service.py:283-337](src/utils/rag_service.py#L283-L337) |
| 按学校查询   | ✅ 已实现 | [analysis.py:195-282](src/api/v1/analysis.py#L195-L282)       |
| 按学历查询   | ✅ 已实现 | 同上                                                            |
| 按专业查询   | ✅ 已实现 | 同上                                                            |
| 数据可视化   | ✅ 已实现 | [analysis.js](frontend-new/js/pages/analysis.js) ECharts图表    |
| 统计数据    | ✅ 已实现 | [analysis.py:468-562](src/api/v1/analysis.py#L468-L562)       |

***

## 三、非功能性需求检查

| 需求项       | 实现状态    | 说明                                        |
| --------- | ------- | ----------------------------------------- |
| PDF格式支持   | ✅ 已实现   | 使用 PyMuPDF (fitz)                         |
| DOCX格式支持  | ✅ 已实现   | 使用 python-docx                            |
| 响应时间 ≤ 3秒 | ⚠️ 部分满足 | 非LLM操作响应快，LLM调用有超时配置                      |
| 高并发上传     | ✅ 已实现   | 批量上传接口，异步任务处理                             |
| 敏感信息加密    | ✅ 已实现   | AES加密 [security.py](src/core/security.py) |
| 横向扩展      | ✅ 已实现   | Docker部署，无状态服务设计                          |

***

## 四、前后端数据交互检查

### 4.1 API 接口匹配情况

| 前端API调用                            | 后端接口                                         | 匹配状态 |
| ---------------------------------- | -------------------------------------------- | ---- |
| `conditionsApi.getList()`          | `GET /api/v1/conditions`                     | ✅ 匹配 |
| `conditionsApi.create()`           | `POST /api/v1/conditions`                    | ✅ 匹配 |
| `conditionsApi.update()`           | `PUT /api/v1/conditions/{id}`                | ✅ 匹配 |
| `conditionsApi.delete()`           | `DELETE /api/v1/conditions/{id}`             | ✅ 匹配 |
| `talentsApi.batchUpload()`         | `POST /api/v1/talents/batch-upload`          | ✅ 匹配 |
| `talentsApi.getList()`             | `GET /api/v1/talents`                        | ✅ 匹配 |
| `analysisApi.query()`              | `POST /api/v1/analysis/query`                | ✅ 匹配 |
| `analysisApi.queryWithAnalytics()` | `POST /api/v1/analysis/query-with-analytics` | ✅ 匹配 |

### 4.2 数据格式匹配检查

#### 筛选条件配置格式 ✅

前端 `upload.js` 构建的 `filterConfig` 格式：

```javascript
{
    groups: [{ logic: 'and', condition_ids: [...] }],
    group_logic: 'and',
    exclude_condition_ids: [...]
}
```

后端 `resume_workflow.py` 正确解析此格式 ✅

#### 人才查询参数 ✅

前端传递参数与后端接口定义一致：

* `name`: 姓名（模糊匹配）

* `major`: 专业（模糊匹配）

* `school`: 院校（模糊匹配）

* `screening_date_start/end`: 选拔日期范围

* `screening_status`: 筛选状态

* `condition_id`: 筛选条件ID

***

## 五、发现的问题与差异

### 5.1 功能性问题

#### 问题1：Word格式支持不完整 ⚠️

* **位置**: [parse\_extract\_node.py:39-48](src/workflows/parse_extract_node.py#L39-L48)

* **描述**: 文件类型映射中 `.doc` 被映射为 `docx`，但旧版 `.doc` 格式需要特殊处理

* **影响**: 用户上传 `.doc` 格式文件可能解析失败

* **建议**: 添加 `.doc` 格式的警告提示或使用 `antiword` 等工具转换

#### 问题2：批量上传进度显示依赖WebSocket ⚠️

* **位置**: [upload.js:678-704](frontend-new/js/pages/upload.js#L678-L704)

* **描述**: WebSocket 连接失败时，进度更新依赖轮询，但轮询逻辑未实现

* **影响**: 网络不稳定时用户无法看到实时进度

* **建议**: 添加轮询作为 WebSocket 的降级方案

#### 问题3：向量存储时 metadata 中 skills 字段格式不一致 ⚠️

* **位置**: [store\_node.py:105-116](src/workflows/store_node.py#L105-L116)

* **描述**: 存储时 skills 是数组，但 metadata 中存储为逗号分隔字符串

* **影响**: RAG查询结果中 skills 显示为字符串而非数组

* **建议**: 保持格式一致性

### 5.2 前后端交互问题

#### 问题1：筛选条件状态枚举值不一致 ⚠️

* **前端**: 使用 `is_active` 布尔值

* **后端**: 使用 `StatusEnum` (active/inactive/deleted)

* **位置**: [conditions.py:47-51](src/api/v1/conditions.py#L47-L51)

* **状态**: 已通过 `_map_to_response` 函数转换 ✅

#### 问题2：人才列表筛选状态参数映射 ⚠️

* **前端**: 传递 `qualified/unqualified`

* **后端**: 枚举值为 `qualified/disqualified`

* **位置**: [talents.py:718-723](src/api/v1/talents.py#L718-L723)

* **状态**: 已通过映射处理 ✅

### 5.3 潜在Bug

#### Bug1：重复简历检测时机 ⚠️

* **位置**: [talents.py:278-301](src/api/v1/talents.py#L278-L301)

* **描述**: 单文件上传时检测重复，但批量上传时在循环内逐个检测，效率较低

* **影响**: 批量上传大量文件时性能下降

* **建议**: 批量上传时先批量查询已存在的hash

#### Bug2：ChromaDB 同步删除可能失败 ⚠️

* **位置**: [talents.py:1145-1152](src/api/v1/talents.py#L1145-L1152)

* **描述**: 逻辑删除人才时同步更新 ChromaDB，失败时仅记录警告

* **影响**: 向量数据库与MySQL数据不一致

* **建议**: 添加定时任务同步修复

***

## 六、额外实现的功能（超出需求）

| 功能            | 实现位置                                            | 说明           |
| ------------- | ----------------------------------------------- | ------------ |
| 用户认证系统        | [auth.py](src/api/v1/auth.py)                   | JWT Token 认证 |
| 用户管理          | [users.py](src/api/v1/users.py)                 | 管理员用户管理      |
| 系统监控          | [monitor.py](src/api/v1/monitor.py)             | 实时监控与日志      |
| 自然语言解析条件      | [nlp\_parser.py](src/services/nlp_parser.py)    | NLP转筛选条件     |
| WebSocket进度推送 | [websocket.py](src/api/v1/websocket.py)         | 实时进度通知       |
| 简历去重          | content\_hash                                   | SHA256内容哈希去重 |
| 人脸检测          | [face\_detector.py](src/utils/face_detector.py) | 智能头像提取       |

***

## 七、总结

### 7.1 需求覆盖情况

| 模块        | 覆盖率  | 状态       |
| --------- | ---- | -------- |
| 人才简历基础管理  | 100% | ✅ 完整实现   |
| 简历解析与存储   | 100% | ✅ 完整实现   |
| 智能信息提取与入库 | 100% | ✅ 完整实现   |
| 向量化存储与检索  | 100% | ✅ 完整实现   |
| 多维度数据分析   | 100% | ✅ 完整实现   |
| 非功能性需求    | 90%  | ⚠️ 部分需优化 |

### 7.2 整体评估

项目已完整实现需求文档中规定的所有核心功能模块，架构设计符合规范要求：

* LangGraph 工作流采用4节点设计（ParseExtractNode → FilterNode → StoreNode → CacheNode）

* 使用 LangChain 进行向量化处理

* 数据存储采用 MySQL + MinIO + ChromaDB + Redis 组合

* 敏感信息采用 AES 加密存储

### 7.3 建议改进项

1. **高优先级**

   * 添加 WebSocket 降级轮询方案

   * 优化批量上传的重复检测逻辑

2. **中优先级**

   * 统一向量存储 metadata 格式

   * 添加 ChromaDB 数据同步修复任务

3. **低优先级**

   * 添加 `.doc` 格式文件警告提示

   * 完善错误处理和用户提示

