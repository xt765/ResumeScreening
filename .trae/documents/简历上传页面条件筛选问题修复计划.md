# ç®€å†ä¸Šä¼ é¡µé¢æ¡ä»¶ç­›é€‰é—®é¢˜ä¿®å¤è®¡åˆ’

## ä¸€ã€é—®é¢˜æ¦‚è¿°

ç®€å†ä¸Šä¼ é¡µé¢çš„æ¡ä»¶ç­›é€‰åŠŸèƒ½æœªè¢«æ­£ç¡®æ‰§è¡Œï¼Œç»è¿‡æ·±å…¥æ’æŸ¥ï¼Œå‘ç°å­˜åœ¨**å¤šä¸ªå±‚é¢çš„é—®é¢˜**ï¼Œéœ€è¦ä»å‰ç«¯åˆ°åç«¯å…¨é“¾è·¯ä¿®å¤ã€‚

## äºŒã€é—®é¢˜æ ¹æºåˆ†æ

### 2.1 æ ¸å¿ƒé—®é¢˜ï¼šå‰ç«¯åªä¼ é€’ç¬¬ä¸€ä¸ªæ¡ä»¶ ID

**é—®é¢˜ä½ç½®**: [upload.js:876-883](file:///d:/Documents/CodeProjects/ResumeScreening/frontend-new/js/pages/upload.js#L876-L883)

```javascript
// è·å–ç¬¬ä¸€ä¸ªæ¡ä»¶ IDï¼ˆå‘åå…¼å®¹ï¼‰
const firstConditionId = this.conditionGroups[0]?.conditionIds[0] || null;

// ç»Ÿä¸€ä½¿ç”¨æ‰¹é‡ä¸Šä¼ æ¥å£
const response = await talentsApi.batchUpload(
    this.uploadedFiles,
    firstConditionId  // âŒ åªä¼ äº†ç¬¬ä¸€ä¸ªæ¡ä»¶ IDï¼
);
```

**é—®é¢˜æè¿°**:
- å‰ç«¯æ„å»ºå™¨å·²ç»æ­£ç¡®å®ç°äº†å¤æ‚ç­›é€‰é…ç½®çš„æ„å»ºé€»è¾‘ï¼ˆ`getFilterConfig()` æ–¹æ³•ï¼‰
- ä½†æäº¤æ—¶**å®Œå…¨æ²¡æœ‰ä½¿ç”¨**è¿™ä¸ªé…ç½®ï¼Œåªå–äº†ç¬¬ä¸€ä¸ªæ¡ä»¶ç»„çš„ç¬¬ä¸€ä¸ªæ¡ä»¶ ID
- å¯¼è‡´ç”¨æˆ·åœ¨ UI ä¸Šé…ç½®çš„å¤šæ¡ä»¶ã€ç»„é—´é€»è¾‘ã€æ’é™¤æ¡ä»¶å…¨éƒ¨å¤±æ•ˆ

### 2.2 é—®é¢˜é“¾ï¼šæ•°æ®ä¼ é€’é“¾è·¯æ–­è£‚

| å±‚çº§ | æ–‡ä»¶ | é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ |
|------|------|------|---------|
| å‰ç«¯æ„å»ºå™¨ | `upload.js:536-553` | âœ… æ­£ç¡®æ„å»ºäº†å¤æ‚ç­›é€‰é…ç½® | æ— é—®é¢˜ |
| å‰ç«¯æäº¤é€»è¾‘ | `upload.js:876-883` | âŒ åªä¼ ç¬¬ä¸€ä¸ªæ¡ä»¶ ID | ğŸ”´ é«˜ |
| å‰ç«¯ API å°è£… | `api.js:256-267` | âŒ åªæ”¯æŒå•ä¸ª conditionId | ğŸ”´ é«˜ |
| åç«¯ API | `talents.py:350-353` | âŒ åªæ¥æ”¶å•ä¸ª condition_id | ğŸ”´ é«˜ |
| FilterNode | `filter_node.py` | âŒ ä¸æ”¯æŒæ¡ä»¶ç»„é€»è¾‘ | ğŸŸ¡ ä¸­ |

### 2.3 æ•°æ®ç»“æ„ä¸åŒ¹é…

**å‰ç«¯æ„å»ºçš„ç­›é€‰é…ç½®ç»“æ„**:
```javascript
{
    "groups": [
        {
            "logic": "and",           // ç»„å†…é€»è¾‘
            "condition_ids": ["id1", "id2"]  // æ¡ä»¶ ID åˆ—è¡¨
        }
    ],
    "group_logic": "and",              // ç»„é—´é€»è¾‘
    "exclude_condition_ids": ["id4"]   // æ’é™¤æ¡ä»¶
}
```

**åç«¯æœŸæœ›çš„ç­›é€‰é…ç½®ç»“æ„**:
```python
{
    "skills": ["Python", "Java"],
    "education_level": "master",
    "experience_years": 5,
    "major": ["è®¡ç®—æœº"],
    "school_tier": "top"
}
```

**é—®é¢˜**: å‰ç«¯ä¼ é€’çš„æ˜¯**æ¡ä»¶ ID ç»„åˆç»“æ„**ï¼Œåç«¯æœŸæœ›çš„æ˜¯**å…·ä½“æ¡ä»¶å­—æ®µ**ï¼Œä¸¤è€…å®Œå…¨ä¸åŒ¹é…ã€‚

### 2.4 é«˜çº§ç­›é€‰åŠŸèƒ½æœªå®ç°

| åŠŸèƒ½ | å‰ç«¯æ”¯æŒ | åç«¯æ”¯æŒ | çŠ¶æ€ |
|------|---------|---------|------|
| å•æ¡ä»¶ç­›é€‰ | âœ… | âœ… | å·²å®ç° |
| æ¡ä»¶ç»„ | âœ… | âŒ | æœªå®ç° |
| ç»„å†…é€»è¾‘ (AND/OR) | âœ… | âŒ | æœªå®ç° |
| ç»„é—´é€»è¾‘ (AND/OR) | âœ… | âŒ | æœªå®ç° |
| æ’é™¤æ¡ä»¶ (NOT) | âœ… | âŒ | æœªå®ç° |

---

## ğŸ”´ æ–°å‘ç°çš„é—®é¢˜

### 2.5 å­¦æ ¡å±‚æ¬¡ç­›é€‰é€»è¾‘é”™è¯¯ï¼ˆä¸¥é‡ï¼‰

**é—®é¢˜ä½ç½®**: [filter_node.py:61-62](file:///d:/Documents/CodeProjects/ResumeScreening/src/workflows/filter_node.py#L61-L62)

```python
if condition_config.get("school_tier"):
    conditions_desc.append(f"é™¢æ ¡å±‚æ¬¡è¦æ±‚: {', '.join(condition_config['school_tier'])}")
```

**é—®é¢˜æè¿°**:
- ä»£ç å‡è®¾ `school_tier` æ˜¯ä¸€ä¸ª**åˆ—è¡¨**ï¼Œä½¿ç”¨ `join()` æ–¹æ³•
- ä½† Schema å®šä¹‰ä¸­ `school_tier` æ˜¯**å•ä¸ªæšä¸¾å€¼** (`SchoolTier | None`)
- è¿™ä¼šå¯¼è‡´ `TypeError: can only join an iterable` é”™è¯¯

**Schema å®šä¹‰**: [condition.py:211-215](file:///d:/Documents/CodeProjects/ResumeScreening/src/schemas/condition.py#L211-L215)
```python
school_tier: SchoolTier | None = Field(
    default=None,
    description="å­¦æ ¡å±‚æ¬¡è¦æ±‚",
    examples=["key"],
)
```

### 2.6 å¿«é€Ÿç­›é€‰å‡½æ•°ç¼ºå°‘å…³é”®å­—æ®µå¤„ç†

**é—®é¢˜ä½ç½®**: [filter_node.py:198-269](file:///d:/Documents/CodeProjects/ResumeScreening/src/workflows/filter_node.py#L198-L269)

`_quick_filter` å‡½æ•°åªå¤„ç†äº†ï¼š
- âœ… å­¦å†è¦æ±‚ (`education_level`)
- âœ… å·¥ä½œå¹´é™ (`experience_years`)

ä½†**æ²¡æœ‰å¤„ç†**ï¼š
- âŒ æŠ€èƒ½è¦æ±‚ (`skills`)
- âŒ ä¸“ä¸šè¦æ±‚ (`major`)
- âŒ å­¦æ ¡å±‚æ¬¡ (`school_tier`)
- âŒ å·¥ä½œå¹´é™ä¸Šé™ (`experience_years_max`)

**å½±å“**: å¦‚æœè®¾ç½®äº†å­¦æ ¡å±‚æ¬¡ã€æŠ€èƒ½æˆ–ä¸“ä¸šè¦æ±‚ï¼Œå¿«é€Ÿç­›é€‰ä¼šè¿”å› `None`ï¼Œå¼ºåˆ¶è°ƒç”¨ LLM è¿›è¡Œç­›é€‰ï¼Œå¢åŠ ä¸å¿…è¦çš„ LLM è°ƒç”¨æˆæœ¬ã€‚

### 2.7 æ•°æ®åº“æ¨¡å‹ä¸ Schema ç±»å‹ä¸ä¸€è‡´

**æ•°æ®åº“æ¨¡å‹**: [condition.py:171-179](file:///d:/Documents/CodeProjects/ResumeScreening/src/models/condition.py#L171-L179)
```python
@property
def school_tier(self) -> list[str]:
    """è·å–é™¢æ ¡å±‚æ¬¡è¦æ±‚åˆ—è¡¨ã€‚"""
    return self.conditions.get("school_tier", [])
```

**Schema å®šä¹‰**: [condition.py:211-215](file:///d:/Documents/CodeProjects/ResumeScreening/src/schemas/condition.py#L211-L215)
```python
school_tier: SchoolTier | None = Field(...)  # å•ä¸ªæšä¸¾å€¼
```

**é—®é¢˜**: æ•°æ®åº“æ¨¡å‹æœŸæœ› `school_tier` æ˜¯åˆ—è¡¨ï¼Œä½† Schema å®šä¹‰ä¸ºå•ä¸ªå€¼ã€‚

### 2.8 å‰ç«¯è¡¨å•ä¸åç«¯æ•°æ®ç±»å‹ä¸ä¸€è‡´

**å‰ç«¯è¡¨å•**: [conditions.js:468-474](file:///d:/Documents/CodeProjects/ResumeScreening/frontend-new/js/pages/conditions.js#L468-L474)
```html
<select class="form-control" id="schoolTier">
    <option value="">ä¸é™</option>
    <option value="top">é¡¶å°–é™¢æ ¡ï¼ˆ985/C9ï¼‰</option>
    <option value="key">é‡ç‚¹é™¢æ ¡ï¼ˆ211ï¼‰</option>
    ...
</select>
```

**é—®é¢˜**: å‰ç«¯ä½¿ç”¨**å•é€‰ä¸‹æ‹‰æ¡†**ï¼Œåªèƒ½é€‰æ‹©ä¸€ä¸ªå­¦æ ¡å±‚æ¬¡ï¼Œä¸æ•°æ®åº“æ¨¡å‹çš„åˆ—è¡¨ç±»å‹ä¸ä¸€è‡´ã€‚

### 2.9 å­¦æ ¡å±‚æ¬¡ç­›é€‰é€»è¾‘ä¸å®Œæ•´

**é—®é¢˜ä½ç½®**: [talents.py:189-212](file:///d:/Documents/CodeProjects/ResumeScreening/src/api/v1/talents.py#L189-L212)

```python
school_tier = config.get("school_tier")
if school_tier:
    tier_schools = {
        "top": ["985", "C9", "æ¸…å", "åŒ—å¤§", ...],
        "key": ["211", "é‡ç‚¹"],
        "overseas": ["å¤§å­¦", "University", "å­¦é™¢", "College"],
    }
    tier_keywords = tier_schools.get(school_tier, [])
```

**é—®é¢˜**:
1. `tier_schools` å­—å…¸ä¸­æ²¡æœ‰ `"ordinary"`ï¼ˆæ™®é€šé™¢æ ¡ï¼‰çš„æ˜ å°„
2. å¦‚æœ `school_tier` æ˜¯ `"ordinary"`ï¼Œ`tier_keywords` ä¼šæ˜¯ç©ºåˆ—è¡¨ï¼Œç­›é€‰æ¡ä»¶å¤±æ•ˆ
3. `overseas` çš„å…³é”®è¯ `"å¤§å­¦"`ã€`"å­¦é™¢"` è¿‡äºå®½æ³›ï¼Œä¼šåŒ¹é…åˆ°å›½å†…é™¢æ ¡

### 2.10 é—®é¢˜æ±‡æ€»è¡¨

| é—®é¢˜ | ä½ç½® | ä¸¥é‡ç¨‹åº¦ | å½±å“ |
|------|------|---------|------|
| å‰ç«¯åªä¼ ç¬¬ä¸€ä¸ªæ¡ä»¶ ID | `upload.js:876-883` | ğŸ”´ é«˜ | å¤šæ¡ä»¶ç­›é€‰å®Œå…¨å¤±æ•ˆ |
| å‰ç«¯ API ä¸æ”¯æŒå¤æ‚é…ç½® | `api.js:256-267` | ğŸ”´ é«˜ | æ— æ³•ä¼ é€’å¤æ‚é…ç½® |
| åç«¯ API ä¸æ¥æ”¶å¤æ‚é…ç½® | `talents.py:350-353` | ğŸ”´ é«˜ | æ— æ³•æ¥æ”¶å¤æ‚é…ç½® |
| å­¦æ ¡å±‚æ¬¡ join é”™è¯¯ | `filter_node.py:61-62` | ğŸ”´ é«˜ | è¿è¡Œæ—¶é”™è¯¯ |
| å¿«é€Ÿç­›é€‰ç¼ºå°‘å­—æ®µ | `filter_node.py:198-269` | ğŸŸ¡ ä¸­ | å¢åŠ  LLM è°ƒç”¨æˆæœ¬ |
| æ•°æ®ç±»å‹ä¸ä¸€è‡´ | `condition.py` å¤šå¤„ | ğŸŸ¡ ä¸­ | æ•°æ®å­˜å‚¨æ··ä¹± |
| å­¦æ ¡å±‚æ¬¡æ˜ å°„ä¸å®Œæ•´ | `talents.py:191-207` | ğŸŸ¡ ä¸­ | æ™®é€šé™¢æ ¡ç­›é€‰å¤±æ•ˆ |

## ä¸‰ã€ä¿®å¤æ–¹æ¡ˆ

### 3.1 æ–¹æ¡ˆæ¦‚è¿°

é‡‡ç”¨**å®Œæ•´å®ç°æ–¹æ¡ˆ**ï¼Œä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰é—®é¢˜ï¼š

1. **å‰ç«¯ä¿®æ”¹**: ä¼ é€’å®Œæ•´çš„ç­›é€‰é…ç½®ï¼Œè€Œéå•ä¸ªæ¡ä»¶ ID
2. **åç«¯ API ä¿®æ”¹**: æ¥æ”¶å¹¶å¤„ç†å¤æ‚ç­›é€‰é…ç½®
3. **FilterNode é‡æ„**: å®ç°æ¡ä»¶ç»„ã€ç»„é—´é€»è¾‘ã€æ’é™¤æ¡ä»¶çš„å®Œæ•´ç­›é€‰é€»è¾‘

### 3.2 è¯¦ç»†ä¿®æ”¹æ¸…å•

#### 3.2.1 å‰ç«¯ä¿®æ”¹

**æ–‡ä»¶**: `frontend-new/js/api.js`

ä¿®æ”¹ `batchUpload` æ–¹æ³•ï¼Œæ”¯æŒä¼ é€’å®Œæ•´ç­›é€‰é…ç½®ï¼š

```javascript
/**
 * æ‰¹é‡ä¸Šä¼ ç®€å†
 * @param {FileList|File[]} files - ç®€å†æ–‡ä»¶åˆ—è¡¨
 * @param {Object|string|null} filterConfig - ç­›é€‰é…ç½®å¯¹è±¡æˆ–æ¡ä»¶ ID
 */
async batchUpload(files, filterConfig = null) {
    const formData = new FormData();
    for (const file of files) {
        formData.append('files', file);
    }
    
    const params = new URLSearchParams();
    if (filterConfig) {
        if (typeof filterConfig === 'string') {
            // å‘åå…¼å®¹ï¼šç›´æ¥æ˜¯ condition_id
            params.append('condition_id', filterConfig);
        } else {
            // æ–°æ ¼å¼ï¼šå®Œæ•´ç­›é€‰é…ç½®
            params.append('filter_config', JSON.stringify(filterConfig));
        }
    }
    
    const url = params.toString() 
        ? `/talents/batch-upload?${params.toString()}`
        : '/talents/batch-upload';

    return api.upload(url, formData);
}
```

**æ–‡ä»¶**: `frontend-new/js/pages/upload.js`

ä¿®æ”¹ `submitScreening` æ–¹æ³•ï¼Œä½¿ç”¨ `getFilterConfig()`ï¼š

```javascript
async submitScreening() {
    // ... å‰é¢çš„ä»£ç ä¿æŒä¸å˜ ...

    // è·å–å®Œæ•´ç­›é€‰é…ç½®
    const filterConfig = this.getFilterConfig();

    // ç»Ÿä¸€ä½¿ç”¨æ‰¹é‡ä¸Šä¼ æ¥å£
    const response = await talentsApi.batchUpload(
        this.uploadedFiles,
        filterConfig  // ä¼ é€’å®Œæ•´é…ç½®
    );

    // ... åé¢çš„ä»£ç ä¿æŒä¸å˜ ...
}
```

#### 3.2.2 åç«¯ Schema ä¿®æ”¹

**æ–‡ä»¶**: `src/schemas/condition.py`

æ–°å¢ç­›é€‰é…ç½®è¯·æ±‚æ¨¡å‹ï¼š

```python
class ConditionGroupRequest(BaseModel):
    """æ¡ä»¶ç»„è¯·æ±‚æ¨¡å‹ã€‚
    
    ç”¨äºæ¥æ”¶å‰ç«¯ä¼ é€’çš„æ¡ä»¶ç»„é…ç½®ã€‚
    
    Attributes:
        logic: ç»„å†…é€»è¾‘ï¼ˆand/orï¼‰ã€‚
        condition_ids: æ¡ä»¶ ID åˆ—è¡¨ã€‚
    """
    
    logic: Literal["and", "or"] = Field(default="and", description="ç»„å†…é€»è¾‘")
    condition_ids: list[str] = Field(default_factory=list, description="æ¡ä»¶IDåˆ—è¡¨")


class FilterConfigRequest(BaseModel):
    """å®Œæ•´ç­›é€‰é…ç½®è¯·æ±‚æ¨¡å‹ã€‚
    
    ç”¨äºæ¥æ”¶å‰ç«¯ä¼ é€’çš„å¤æ‚ç­›é€‰é…ç½®ã€‚
    
    Attributes:
        groups: æ¡ä»¶ç»„åˆ—è¡¨ã€‚
        group_logic: ç»„é—´é€»è¾‘ï¼ˆand/orï¼‰ã€‚
        exclude_condition_ids: æ’é™¤æ¡ä»¶ ID åˆ—è¡¨ã€‚
    """
    
    groups: list[ConditionGroupRequest] = Field(
        default_factory=list, 
        description="æ¡ä»¶ç»„åˆ—è¡¨"
    )
    group_logic: Literal["and", "or"] = Field(
        default="and", 
        description="ç»„é—´é€»è¾‘"
    )
    exclude_condition_ids: list[str] = Field(
        default_factory=list, 
        description="æ’é™¤æ¡ä»¶IDåˆ—è¡¨"
    )
```

#### 3.2.3 åç«¯ API ä¿®æ”¹

**æ–‡ä»¶**: `src/api/v1/talents.py`

ä¿®æ”¹ `batch_upload` å’Œ `upload_and_screen` æ¥å£ï¼š

```python
from src.schemas.condition import FilterConfigRequest

@router.post("/batch-upload")
async def batch_upload(
    files: Annotated[list[UploadFile], File(description="ç®€å†æ–‡ä»¶åˆ—è¡¨")],
    condition_id: Annotated[str | None, Query(description="ç­›é€‰æ¡ä»¶IDï¼ˆå‘åå…¼å®¹ï¼‰")] = None,
    filter_config: Annotated[str | None, Query(description="ç­›é€‰é…ç½®JSON")] = None,
) -> APIResponse[dict[str, Any]]:
    """æ‰¹é‡ä¸Šä¼ ç®€å†ã€‚
    
    Args:
        files: ä¸Šä¼ çš„ç®€å†æ–‡ä»¶åˆ—è¡¨
        condition_id: ç­›é€‰æ¡ä»¶ IDï¼ˆå‘åå…¼å®¹ï¼‰
        filter_config: ç­›é€‰é…ç½® JSONï¼ˆæ–°æ ¼å¼ï¼‰
    
    Returns:
        APIResponse[dict[str, Any]]: åŒ…å«ä»»åŠ¡ ID çš„å“åº”
    """
    # è§£æç­›é€‰é…ç½®
    parsed_filter_config = None
    if filter_config:
        import json
        parsed_filter_config = json.loads(filter_config)
    elif condition_id:
        # å‘åå…¼å®¹ï¼šå•ä¸ª condition_id è½¬æ¢ä¸ºç®€å•é…ç½®
        parsed_filter_config = {"condition_id": condition_id}
    
    # ... åç»­å¤„ç†é€»è¾‘ ...
```

#### 3.2.4 å·¥ä½œæµå…¥å£ä¿®æ”¹

**æ–‡ä»¶**: `src/workflows/resume_workflow.py`

ä¿®æ”¹ `run_resume_workflow` å‡½æ•°ï¼Œæ”¯æŒå¤æ‚ç­›é€‰é…ç½®ï¼š

```python
async def run_resume_workflow(
    file_path: str,
    condition_id: str | None = None,
    condition_config: dict[str, Any] | None = None,
    filter_config: dict[str, Any] | None = None,  # æ–°å¢ï¼šå¤æ‚ç­›é€‰é…ç½®
    content_hash: str | None = None,
) -> dict[str, Any]:
    """è¿è¡Œç®€å†å¤„ç†å·¥ä½œæµã€‚
    
    Args:
        file_path: ç®€å†æ–‡ä»¶è·¯å¾„
        condition_id: ç­›é€‰æ¡ä»¶ IDï¼ˆå‘åå…¼å®¹ï¼‰
        condition_config: ç­›é€‰æ¡ä»¶é…ç½®ï¼ˆå‘åå…¼å®¹ï¼‰
        filter_config: å¤æ‚ç­›é€‰é…ç½®ï¼ˆæ–°æ ¼å¼ï¼‰
        content_hash: ç®€å†å†…å®¹å“ˆå¸Œ
    """
    # å¤„ç†å¤æ‚ç­›é€‰é…ç½®
    if filter_config and "groups" in filter_config:
        # å¤æ‚ç­›é€‰é…ç½®ï¼šåŠ è½½æ‰€æœ‰æ¡ä»¶å¹¶åˆå¹¶
        condition_config = await _load_and_merge_conditions(filter_config)
    elif not condition_config and condition_id:
        # å‘åå…¼å®¹ï¼šå•ä¸ªæ¡ä»¶ ID
        condition_config = await _load_condition_by_id(condition_id)
    
    # ... åç»­å¤„ç†é€»è¾‘ ...
```

#### 3.2.5 FilterNode é‡æ„

**æ–‡ä»¶**: `src/workflows/filter_node.py`

å®ç°å¤æ‚ç­›é€‰é€»è¾‘ï¼š

```python
async def filter_node(state: ResumeState) -> dict[str, Any]:
    """ç­›é€‰èŠ‚ç‚¹ã€‚
    
    æ”¯æŒä¸¤ç§ç­›é€‰æ¨¡å¼ï¼š
    1. ç®€å•æ¨¡å¼ï¼šç›´æ¥ä½¿ç”¨ condition_config è¿›è¡Œç­›é€‰
    2. å¤æ‚æ¨¡å¼ï¼šæ ¹æ®æ¡ä»¶ç»„ã€ç»„é—´é€»è¾‘ã€æ’é™¤æ¡ä»¶è¿›è¡Œç­›é€‰
    """
    # æ£€æŸ¥æ˜¯å¦æœ‰å¤æ‚ç­›é€‰é…ç½®
    if state.filter_config and "groups" in state.filter_config:
        return await _complex_filter(state)
    
    # ç®€å•ç­›é€‰ï¼ˆå‘åå…¼å®¹ï¼‰
    return await _simple_filter(state)


async def _complex_filter(state: ResumeState) -> dict[str, Any]:
    """å¤„ç†å¤æ‚ç­›é€‰é…ç½®ã€‚
    
    å®ç°æ¡ä»¶ç»„ã€ç»„é—´é€»è¾‘ã€æ’é™¤æ¡ä»¶çš„å®Œæ•´ç­›é€‰é€»è¾‘ã€‚
    """
    filter_config = state.filter_config
    groups = filter_config.get("groups", [])
    group_logic = filter_config.get("group_logic", "and")
    exclude_ids = filter_config.get("exclude_condition_ids", [])
    
    # åŠ è½½æ‰€æœ‰éœ€è¦çš„æ¡ä»¶é…ç½®
    all_condition_ids = set()
    for group in groups:
        all_condition_ids.update(group.get("condition_ids", []))
    all_condition_ids.update(exclude_ids)
    
    conditions_map = await _load_conditions_by_ids(all_condition_ids)
    
    # è¯„ä¼°æ¯ä¸ªæ¡ä»¶ç»„
    group_results = []
    for group in groups:
        group_result = await _evaluate_condition_group(
            state.candidate_info,
            group["condition_ids"],
            group["logic"],
            conditions_map
        )
        group_results.append(group_result)
    
    # ç»„é—´é€»è¾‘
    if group_logic == "and":
        is_qualified = all(r["is_qualified"] for r in group_results)
    else:
        is_qualified = any(r["is_qualified"] for r in group_results)
    
    # æ’é™¤æ¡ä»¶
    if exclude_ids and is_qualified:
        exclude_result = await _evaluate_exclude_conditions(
            state.candidate_info,
            exclude_ids,
            conditions_map
        )
        is_qualified = not exclude_result
    
    return {
        "is_qualified": is_qualified,
        "qualification_reason": _build_qualification_reason(group_results, exclude_ids),
        "workflow_status": "filtered",
    }


async def _evaluate_condition_group(
    candidate_info: dict[str, Any],
    condition_ids: list[str],
    logic: str,
    conditions_map: dict[str, dict[str, Any]]
) -> dict[str, Any]:
    """è¯„ä¼°å•ä¸ªæ¡ä»¶ç»„ã€‚
    
    Args:
        candidate_info: å€™é€‰äººä¿¡æ¯
        condition_ids: æ¡ä»¶ ID åˆ—è¡¨
        logic: ç»„å†…é€»è¾‘ï¼ˆand/orï¼‰
        conditions_map: æ¡ä»¶é…ç½®æ˜ å°„
    
    Returns:
        dict[str, Any]: è¯„ä¼°ç»“æœ
    """
    results = []
    for cond_id in condition_ids:
        cond_config = conditions_map.get(cond_id)
        if cond_config:
            result = _quick_filter(candidate_info, cond_config)
            if result is None:
                result = _call_llm_filter(candidate_info, cond_config)
            results.append(result)
    
    if logic == "and":
        is_qualified = all(r.is_qualified for r in results if r)
    else:
        is_qualified = any(r.is_qualified for r in results if r)
    
    return {
        "is_qualified": is_qualified,
        "results": results
    }
```

#### 3.2.6 çŠ¶æ€æ¨¡å‹ä¿®æ”¹

**æ–‡ä»¶**: `src/workflows/state.py`

æ–°å¢ `filter_config` å­—æ®µï¼š

```python
class ResumeState(BaseModel):
    """ç®€å†å¤„ç†å·¥ä½œæµçŠ¶æ€ã€‚"""
    
    # ... ç°æœ‰å­—æ®µ ...
    
    # ç­›é€‰æ¡ä»¶
    condition_id: str | None = Field(default=None, description="ç­›é€‰æ¡ä»¶ ID")
    condition_config: dict[str, Any] | None = Field(default=None, description="ç­›é€‰æ¡ä»¶é…ç½®")
    filter_config: dict[str, Any] | None = Field(default=None, description="å¤æ‚ç­›é€‰é…ç½®ï¼ˆæ–°æ ¼å¼ï¼‰")
    
    # ... å…¶ä»–å­—æ®µ ...
```

## å››ã€ä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | ä¿®æ”¹å†…å®¹ |
|------|---------|---------|
| `frontend-new/js/api.js` | ä¿®æ”¹ | `batchUpload` æ–¹æ³•æ”¯æŒå¤æ‚é…ç½® |
| `frontend-new/js/pages/upload.js` | ä¿®æ”¹ | `submitScreening` ä½¿ç”¨ `getFilterConfig()` |
| `src/schemas/condition.py` | æ–°å¢ | `ConditionGroupRequest`ã€`FilterConfigRequest` æ¨¡å‹ |
| `src/api/v1/talents.py` | ä¿®æ”¹ | `batch_upload`ã€`upload_and_screen` æ¥æ”¶å¤æ‚é…ç½®ï¼›ä¿®å¤å­¦æ ¡å±‚æ¬¡æ˜ å°„ |
| `src/workflows/state.py` | ä¿®æ”¹ | æ–°å¢ `filter_config` å­—æ®µ |
| `src/workflows/resume_workflow.py` | ä¿®æ”¹ | æ”¯æŒå¤æ‚ç­›é€‰é…ç½® |
| `src/workflows/filter_node.py` | é‡æ„ | å®ç°æ¡ä»¶ç»„ã€ç»„é—´é€»è¾‘ã€æ’é™¤æ¡ä»¶ï¼›ä¿®å¤ school_tier join é”™è¯¯ï¼›æ‰©å±•å¿«é€Ÿç­›é€‰ |
| `src/models/condition.py` | ä¿®æ”¹ | ä¿®å¤ `school_tier` å±æ€§ç±»å‹ |

---

## ğŸ”§ æ–°å¢ä¿®å¤å†…å®¹

### 4.1 ä¿®å¤å­¦æ ¡å±‚æ¬¡ join é”™è¯¯

**æ–‡ä»¶**: `src/workflows/filter_node.py`

**ä¿®æ”¹ä½ç½®**: ç¬¬ 61-62 è¡Œ

```python
# ä¿®æ”¹å‰ï¼ˆé”™è¯¯ï¼‰
if condition_config.get("school_tier"):
    conditions_desc.append(f"é™¢æ ¡å±‚æ¬¡è¦æ±‚: {', '.join(condition_config['school_tier'])}")

# ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰
if condition_config.get("school_tier"):
    school_tier = condition_config['school_tier']
    # school_tier å¯èƒ½æ˜¯å­—ç¬¦ä¸²æˆ–åˆ—è¡¨ï¼Œç»Ÿä¸€å¤„ç†
    tier_text = school_tier if isinstance(school_tier, str) else ', '.join(school_tier)
    conditions_desc.append(f"é™¢æ ¡å±‚æ¬¡è¦æ±‚: {tier_text}")
```

### 4.2 æ‰©å±•å¿«é€Ÿç­›é€‰å‡½æ•°

**æ–‡ä»¶**: `src/workflows/filter_node.py`

**ä¿®æ”¹ä½ç½®**: `_quick_filter` å‡½æ•°

æ–°å¢ä»¥ä¸‹ç­›é€‰é€»è¾‘ï¼š

```python
def _quick_filter(
    candidate_info: dict[str, Any],
    condition_config: dict[str, Any],
) -> FilterResult | None:
    """å¿«é€Ÿé¢„ç­›é€‰ã€‚"""
    unmatched: list[str] = []
    matched: list[str] = []

    # ... ç°æœ‰çš„å­¦å†å’Œå·¥ä½œå¹´é™ç­›é€‰é€»è¾‘ ...

    # æ–°å¢ï¼šæŠ€èƒ½ç­›é€‰
    required_skills = condition_config.get("skills", [])
    if required_skills:
        candidate_skills = set(s.lower() for s in candidate_info.get("skills", []))
        matched_skills = []
        missing_skills = []
        for skill in required_skills:
            if skill.lower() in candidate_skills:
                matched_skills.append(skill)
            else:
                missing_skills.append(skill)
        
        if matched_skills:
            matched.append(f"æŠ€èƒ½åŒ¹é…: {', '.join(matched_skills)}")
        if missing_skills:
            unmatched.append(f"ç¼ºå°‘æŠ€èƒ½: {', '.join(missing_skills)}")

    # æ–°å¢ï¼šä¸“ä¸šç­›é€‰
    required_majors = condition_config.get("major", [])
    if required_majors:
        candidate_major = candidate_info.get("major", "").lower()
        major_matched = any(m.lower() in candidate_major for m in required_majors)
        if major_matched:
            matched.append(f"ä¸“ä¸šåŒ¹é…: {candidate_info.get('major')}")
        else:
            unmatched.append(f"ä¸“ä¸šä¸åŒ¹é…: è¦æ±‚{required_majors}ï¼Œå®é™…{candidate_info.get('major')}")

    # æ–°å¢ï¼šå­¦æ ¡å±‚æ¬¡ç­›é€‰
    school_tier = condition_config.get("school_tier")
    if school_tier:
        candidate_school = candidate_info.get("school", "")
        tier_matched = _check_school_tier(candidate_school, school_tier)
        if tier_matched:
            matched.append(f"å­¦æ ¡å±‚æ¬¡ç¬¦åˆ: {candidate_school}")
        else:
            unmatched.append(f"å­¦æ ¡å±‚æ¬¡ä¸ç¬¦åˆ: {candidate_school}")

    # æ–°å¢ï¼šå·¥ä½œå¹´é™ä¸Šé™ç­›é€‰
    experience_years_max = condition_config.get("experience_years_max")
    if experience_years_max is not None:
        candidate_years = candidate_info.get("work_years", 0) or 0
        if candidate_years <= experience_years_max:
            matched.append(f"å·¥ä½œå¹´é™ç¬¦åˆä¸Šé™: {candidate_years}å¹´")
        else:
            unmatched.append(f"å·¥ä½œå¹´é™è¶…é™: è¦æ±‚æœ€å¤š{experience_years_max}å¹´ï¼Œå®é™…{candidate_years}å¹´")

    # ... è¿”å›ç»“æœé€»è¾‘ ...
```

### 4.3 æ–°å¢å­¦æ ¡å±‚æ¬¡æ£€æŸ¥å‡½æ•°

**æ–‡ä»¶**: `src/workflows/filter_node.py`

```python
def _check_school_tier(school: str, tier: str) -> bool:
    """æ£€æŸ¥å­¦æ ¡æ˜¯å¦ç¬¦åˆå±‚æ¬¡è¦æ±‚ã€‚
    
    Args:
        school: å­¦æ ¡åç§°
        tier: å­¦æ ¡å±‚æ¬¡ï¼ˆtop/key/ordinary/overseasï¼‰
    
    Returns:
        bool: æ˜¯å¦ç¬¦åˆè¦æ±‚
    """
    if not school:
        return False
    
    school_lower = school.lower()
    
    tier_keywords = {
        "top": ["985", "c9", "æ¸…å", "åŒ—å¤§", "å¤æ—¦", "ä¸Šäº¤", "æµ™å¤§", 
                "ä¸­ç§‘å¤§", "å—å¤§", "è¥¿äº¤", "å“ˆå·¥å¤§", "ä¸­å›½ç§‘å­¦é™¢"],
        "key": ["211", "é‡ç‚¹"],
        "ordinary": [],  # æ™®é€šé™¢æ ¡ï¼šä¸åœ¨ top å’Œ key ä¸­çš„è§†ä¸ºæ™®é€š
        "overseas": ["university", "college", "institute", "mit", "stanford", 
                     "harvard", "cambridge", "oxford"],
    }
    
    keywords = tier_keywords.get(tier, [])
    
    if tier == "ordinary":
        # æ™®é€šé™¢æ ¡ï¼šä¸åœ¨ top å’Œ key ä¸­ï¼Œä¸”ä¸æ˜¯æµ·å¤–é™¢æ ¡
        top_keywords = tier_keywords["top"] + tier_keywords["key"]
        overseas_keywords = tier_keywords["overseas"]
        is_top = any(kw.lower() in school_lower for kw in top_keywords)
        is_overseas = any(kw.lower() in school_lower for kw in overseas_keywords)
        return not is_top and not is_overseas
    
    return any(kw.lower() in school_lower for kw in keywords)
```

### 4.4 ä¿®å¤æ•°æ®åº“æ¨¡å‹ç±»å‹ä¸ä¸€è‡´

**æ–‡ä»¶**: `src/models/condition.py`

**ä¿®æ”¹ä½ç½®**: ç¬¬ 171-179 è¡Œ

```python
# ä¿®æ”¹å‰ï¼ˆé”™è¯¯ï¼‰
@property
def school_tier(self) -> list[str]:
    """è·å–é™¢æ ¡å±‚æ¬¡è¦æ±‚åˆ—è¡¨ã€‚"""
    return self.conditions.get("school_tier", [])

# ä¿®æ”¹åï¼ˆæ­£ç¡®ï¼‰
@property
def school_tier(self) -> str | None:
    """è·å–é™¢æ ¡å±‚æ¬¡è¦æ±‚ã€‚"""
    return self.conditions.get("school_tier")
```

### 4.5 ä¿®å¤å­¦æ ¡å±‚æ¬¡æ˜ å°„ä¸å®Œæ•´

**æ–‡ä»¶**: `src/api/v1/talents.py`

**ä¿®æ”¹ä½ç½®**: ç¬¬ 189-212 è¡Œ

**ğŸ”´ æ ¹æœ¬æ€§é‡æ„ï¼šå½“å‰å®ç°å®Œå…¨æ— æ³•æ­£ç¡®åŒ¹é…å­¦æ ¡å±‚æ¬¡ï¼**

#### å½“å‰å®ç°çš„é—®é¢˜

| å­¦æ ¡åç§° | å®é™…å±‚æ¬¡ | å½“å‰å®ç°èƒ½å¦åŒ¹é… | åŸå›  |
|---------|---------|----------------|------|
| ä¸œåŒ—å¤§å­¦ | 985 + 211 | âŒ æ— æ³•åŒ¹é… | å…³é”®è¯ä¸­æ²¡æœ‰"ä¸œåŒ—" |
| å—äº¬å¤§å­¦ | 985 + C9 | âŒ æ— æ³•åŒ¹é… | å…³é”®è¯"å—å¤§"ä¸"å—äº¬å¤§å­¦"ä¸åŒ¹é… |
| å››å·å¤§å­¦ | 985 + 211 | âŒ æ— æ³•åŒ¹é… | å…³é”®è¯ä¸­æ²¡æœ‰"å››å·" |
| åä¸­ç§‘æŠ€å¤§å­¦ | 985 + 211 | âŒ æ— æ³•åŒ¹é… | å…³é”®è¯ä¸­æ²¡æœ‰"åä¸­" |
| å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦ | 985 + C9 | âš ï¸ éƒ¨åˆ†åŒ¹é… | "å“ˆå·¥å¤§"å¯èƒ½ä¸åŒ¹é…"å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦" |

#### æ–°æ–¹æ¡ˆï¼šç®€åŒ–çš„å­¦æ ¡å±‚æ¬¡åˆ†ç±»ï¼ˆæ”¯æŒå¤šé€‰ï¼‰

**åˆ†ç±»è®¾è®¡**ï¼ˆæŒ‰ç”¨æˆ·è¦æ±‚ç®€åŒ–ï¼‰ï¼š

| å±‚æ¬¡ | è¯´æ˜ | åŒ…å«é™¢æ ¡ |
|------|------|---------|
| `985_211` | 985/211 é™¢æ ¡ | æ‰€æœ‰ 985 å’Œ 211 é™¢æ ¡ |
| `overseas` | æµ·å¤–çŸ¥åé™¢æ ¡ | QS å‰ 100 æµ·å¤–é™¢æ ¡ |
| `ordinary` | æ™®é€šå›½å†…é™¢æ ¡ | é 985/211 çš„å›½å†…é™¢æ ¡ |

**å¤šé€‰æ”¯æŒ**ï¼š
- ç”¨æˆ·å¯åŒæ—¶é€‰æ‹©å¤šä¸ªå±‚æ¬¡ï¼Œä¾‹å¦‚ï¼š985_211 + overseas
- ç­›é€‰é€»è¾‘ï¼šå€™é€‰äººå­¦æ ¡æ»¡è¶³ä»»ä¸€é€‰ä¸­å±‚æ¬¡å³å¯é€šè¿‡

**æ–‡ä»¶**: `src/utils/school_tier_data.py`ï¼ˆæ–°å»ºï¼‰

```python
"""å­¦æ ¡å±‚æ¬¡æ•°æ®æ¨¡å—ã€‚

ç®€åŒ–çš„å­¦æ ¡å±‚æ¬¡åˆ†ç±»ï¼š
- 985_211: 985 å’Œ 211 é™¢æ ¡
- overseas: æµ·å¤–çŸ¥åé™¢æ ¡
- ordinary: æ™®é€šå›½å†…é™¢æ ¡
"""

# 985 é™¢æ ¡å®Œæ•´åˆ—è¡¨ï¼ˆ39 æ‰€ï¼‰
SCHOOLS_985 = {
    # å…¨ç§°: [ç®€ç§°åˆ—è¡¨]
    "æ¸…åå¤§å­¦": ["æ¸…å", "æ¸…åå¤§å­¦"],
    "åŒ—äº¬å¤§å­¦": ["åŒ—å¤§", "åŒ—äº¬å¤§å­¦"],
    "å¤æ—¦å¤§å­¦": ["å¤æ—¦", "å¤æ—¦å¤§å­¦"],
    "ä¸Šæµ·äº¤é€šå¤§å­¦": ["ä¸Šäº¤", "ä¸Šæµ·äº¤é€šå¤§å­¦", "ä¸Šæµ·äº¤å¤§"],
    "æµ™æ±Ÿå¤§å­¦": ["æµ™å¤§", "æµ™æ±Ÿå¤§å­¦"],
    "ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦": ["ä¸­ç§‘å¤§", "ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦", "ä¸­å›½ç§‘å¤§"],
    "å—äº¬å¤§å­¦": ["å—å¤§", "å—äº¬å¤§å­¦"],
    "è¥¿å®‰äº¤é€šå¤§å­¦": ["è¥¿äº¤", "è¥¿å®‰äº¤é€šå¤§å­¦", "è¥¿å®‰äº¤å¤§"],
    "å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦": ["å“ˆå·¥å¤§", "å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦", "å“ˆå·¥"],
    "ä¸­å›½äººæ°‘å¤§å­¦": ["äººå¤§", "ä¸­å›½äººæ°‘å¤§å­¦"],
    "åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦": ["åŒ—èˆª", "åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦"],
    "åŒ—äº¬ç†å·¥å¤§å­¦": ["åŒ—ç†", "åŒ—äº¬ç†å·¥å¤§å­¦"],
    "ä¸­å›½å†œä¸šå¤§å­¦": ["ä¸­å›½å†œå¤§", "ä¸­å›½å†œä¸šå¤§å­¦"],
    "åŒ—äº¬å¸ˆèŒƒå¤§å­¦": ["åŒ—å¸ˆå¤§", "åŒ—äº¬å¸ˆèŒƒå¤§å­¦"],
    "ä¸­å¤®æ°‘æ—å¤§å­¦": ["ä¸­å¤®æ°‘å¤§", "ä¸­å¤®æ°‘æ—å¤§å­¦"],
    "å—å¼€å¤§å­¦": ["å—å¼€", "å—å¼€å¤§å­¦"],
    "å¤©æ´¥å¤§å­¦": ["å¤©å¤§", "å¤©æ´¥å¤§å­¦"],
    "å¤§è¿ç†å·¥å¤§å­¦": ["å¤§å·¥", "å¤§è¿ç†å·¥å¤§å­¦"],
    "ä¸œåŒ—å¤§å­¦": ["ä¸œå¤§", "ä¸œåŒ—å¤§å­¦"],
    "å‰æ—å¤§å­¦": ["å‰å¤§", "å‰æ—å¤§å­¦"],
    "åŒæµå¤§å­¦": ["åŒæµ", "åŒæµå¤§å­¦"],
    "åä¸œå¸ˆèŒƒå¤§å­¦": ["åä¸œå¸ˆå¤§", "åä¸œå¸ˆèŒƒå¤§å­¦"],
    "ä¸œå—å¤§å­¦": ["ä¸œå—", "ä¸œå—å¤§å­¦"],
    "å¦é—¨å¤§å­¦": ["å¦å¤§", "å¦é—¨å¤§å­¦"],
    "å±±ä¸œå¤§å­¦": ["å±±å¤§", "å±±ä¸œå¤§å­¦"],
    "ä¸­å›½æµ·æ´‹å¤§å­¦": ["ä¸­å›½æµ·å¤§", "ä¸­å›½æµ·æ´‹å¤§å­¦"],
    "æ­¦æ±‰å¤§å­¦": ["æ­¦å¤§", "æ­¦æ±‰å¤§å­¦"],
    "åä¸­ç§‘æŠ€å¤§å­¦": ["åç§‘", "åä¸­ç§‘æŠ€å¤§å­¦"],
    "æ¹–å—å¤§å­¦": ["æ¹–å¤§", "æ¹–å—å¤§å­¦"],
    "ä¸­å—å¤§å­¦": ["ä¸­å—", "ä¸­å—å¤§å­¦"],
    "ä¸­å±±å¤§å­¦": ["ä¸­å¤§", "ä¸­å±±å¤§å­¦"],
    "åå—ç†å·¥å¤§å­¦": ["åå·¥", "åå—ç†å·¥å¤§å­¦"],
    "å››å·å¤§å­¦": ["å·å¤§", "å››å·å¤§å­¦"],
    "é‡åº†å¤§å­¦": ["é‡å¤§", "é‡åº†å¤§å­¦"],
    "ç”µå­ç§‘æŠ€å¤§å­¦": ["ç”µå­ç§‘å¤§", "ç”µå­ç§‘æŠ€å¤§å­¦"],
    "è¥¿åŒ—å·¥ä¸šå¤§å­¦": ["è¥¿å·¥å¤§", "è¥¿åŒ—å·¥ä¸šå¤§å­¦"],
    "è¥¿åŒ—å†œæ—ç§‘æŠ€å¤§å­¦": ["è¥¿åŒ—å†œæ—", "è¥¿åŒ—å†œæ—ç§‘æŠ€å¤§å­¦"],
    "å…°å·å¤§å­¦": ["å…°å¤§", "å…°å·å¤§å­¦"],
    "å›½é˜²ç§‘æŠ€å¤§å­¦": ["å›½é˜²ç§‘å¤§", "å›½é˜²ç§‘æŠ€å¤§å­¦"],
}

# 211 é™¢æ ¡åˆ—è¡¨ï¼ˆé 985ï¼Œçº¦ 73 æ‰€ï¼‰
SCHOOLS_211_NON_985 = {
    "åŒ—äº¬äº¤é€šå¤§å­¦": ["åŒ—äº¤", "åŒ—äº¬äº¤é€šå¤§å­¦"],
    "åŒ—äº¬å·¥ä¸šå¤§å­¦": ["åŒ—å·¥å¤§", "åŒ—äº¬å·¥ä¸šå¤§å­¦"],
    "åŒ—äº¬ç§‘æŠ€å¤§å­¦": ["åŒ—ç§‘", "åŒ—äº¬ç§‘æŠ€å¤§å­¦"],
    "åŒ—äº¬åŒ–å·¥å¤§å­¦": ["åŒ—åŒ–", "åŒ—äº¬åŒ–å·¥å¤§å­¦"],
    "åŒ—äº¬é‚®ç”µå¤§å­¦": ["åŒ—é‚®", "åŒ—äº¬é‚®ç”µå¤§å­¦"],
    "åŒ—äº¬æ—ä¸šå¤§å­¦": ["åŒ—æ—", "åŒ—äº¬æ—ä¸šå¤§å­¦"],
    "åŒ—äº¬ä¸­åŒ»è¯å¤§å­¦": ["åŒ—ä¸­åŒ»", "åŒ—äº¬ä¸­åŒ»è¯å¤§å­¦"],
    "åŒ—äº¬å¤–å›½è¯­å¤§å­¦": ["åŒ—å¤–", "åŒ—äº¬å¤–å›½è¯­å¤§å­¦"],
    "ä¸­å›½ä¼ åª’å¤§å­¦": ["ä¸­ä¼ ", "ä¸­å›½ä¼ åª’å¤§å­¦"],
    "å¯¹å¤–ç»æµè´¸æ˜“å¤§å­¦": ["å¯¹å¤–ç»è´¸", "å¯¹å¤–ç»æµè´¸æ˜“å¤§å­¦"],
    "ä¸­å¤®è´¢ç»å¤§å­¦": ["å¤®è´¢", "ä¸­å¤®è´¢ç»å¤§å­¦"],
    "ä¸­å›½æ”¿æ³•å¤§å­¦": ["æ³•å¤§", "ä¸­å›½æ”¿æ³•å¤§å­¦"],
    "ååŒ—ç”µåŠ›å¤§å­¦": ["åç”µ", "ååŒ—ç”µåŠ›å¤§å­¦"],
    "ä¸­å›½çŸ¿ä¸šå¤§å­¦": ["çŸ¿å¤§", "ä¸­å›½çŸ¿ä¸šå¤§å­¦"],
    "ä¸­å›½çŸ³æ²¹å¤§å­¦": ["çŸ³å¤§", "ä¸­å›½çŸ³æ²¹å¤§å­¦"],
    "ä¸­å›½åœ°è´¨å¤§å­¦": ["åœ°å¤§", "ä¸­å›½åœ°è´¨å¤§å­¦"],
    "è‹å·å¤§å­¦": ["è‹å¤§", "è‹å·å¤§å­¦"],
    "å—äº¬èˆªç©ºèˆªå¤©å¤§å­¦": ["å—èˆª", "å—äº¬èˆªç©ºèˆªå¤©å¤§å­¦"],
    "å—äº¬ç†å·¥å¤§å­¦": ["å—ç†", "å—äº¬ç†å·¥å¤§å­¦"],
    "æ²³æµ·å¤§å­¦": ["æ²³æµ·", "æ²³æµ·å¤§å­¦"],
    "å—äº¬å¸ˆèŒƒå¤§å­¦": ["å—å¸ˆå¤§", "å—äº¬å¸ˆèŒƒå¤§å­¦"],
    "ä¸­å›½è¯ç§‘å¤§å­¦": ["è¯å¤§", "ä¸­å›½è¯ç§‘å¤§å­¦"],
    "å—äº¬å†œä¸šå¤§å­¦": ["å—å†œ", "å—äº¬å†œä¸šå¤§å­¦"],
    "æ±Ÿå—å¤§å­¦": ["æ±Ÿå—", "æ±Ÿå—å¤§å­¦"],
    "ä¸œåå¤§å­¦": ["ä¸œå", "ä¸œåå¤§å­¦"],
    "ä¸Šæµ·å¤–å›½è¯­å¤§å­¦": ["ä¸Šå¤–", "ä¸Šæµ·å¤–å›½è¯­å¤§å­¦"],
    "ä¸Šæµ·è´¢ç»å¤§å­¦": ["ä¸Šè´¢", "ä¸Šæµ·è´¢ç»å¤§å­¦"],
    "åä¸œç†å·¥å¤§å­¦": ["åç†", "åä¸œç†å·¥å¤§å­¦"],
    "ä¸Šæµ·å¤§å­¦": ["ä¸Šå¤§", "ä¸Šæµ·å¤§å­¦"],
    "æš¨å—å¤§å­¦": ["æš¨å¤§", "æš¨å—å¤§å­¦"],
    "åå—å¸ˆèŒƒå¤§å­¦": ["åå¸ˆ", "åå—å¸ˆèŒƒå¤§å­¦"],
    "è¥¿å—äº¤é€šå¤§å­¦": ["è¥¿å—äº¤å¤§", "è¥¿å—äº¤é€šå¤§å­¦"],
    "è¥¿å—è´¢ç»å¤§å­¦": ["è¥¿è´¢", "è¥¿å—è´¢ç»å¤§å­¦"],
    "å››å·å†œä¸šå¤§å­¦": ["å·å†œ", "å››å·å†œä¸šå¤§å­¦"],
    "è´µå·å¤§å­¦": ["è´µå¤§", "è´µå·å¤§å­¦"],
    "äº‘å—å¤§å­¦": ["äº‘å¤§", "äº‘å—å¤§å­¦"],
    "è¥¿è—å¤§å­¦": ["è—å¤§", "è¥¿è—å¤§å­¦"],
    "è¥¿åŒ—å¤§å­¦": ["è¥¿å¤§", "è¥¿åŒ—å¤§å­¦"],
    "è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦": ["è¥¿ç”µ", "è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦"],
    "é•¿å®‰å¤§å­¦": ["é•¿å®‰", "é•¿å®‰å¤§å­¦"],
    "é™•è¥¿å¸ˆèŒƒå¤§å­¦": ["é™•å¸ˆå¤§", "é™•è¥¿å¸ˆèŒƒå¤§å­¦"],
    "é’æµ·å¤§å­¦": ["é’å¤§", "é’æµ·å¤§å­¦"],
    "å®å¤å¤§å­¦": ["å®å¤§", "å®å¤å¤§å­¦"],
    "æ–°ç–†å¤§å­¦": ["æ–°å¤§", "æ–°ç–†å¤§å­¦"],
    "çŸ³æ²³å­å¤§å­¦": ["çŸ³å¤§", "çŸ³æ²³å­å¤§å­¦"],
    "æ¹–å—å¸ˆèŒƒå¤§å­¦": ["æ¹–å¸ˆå¤§", "æ¹–å—å¸ˆèŒƒå¤§å­¦"],
    "ä¸œåŒ—å¸ˆèŒƒå¤§å­¦": ["ä¸œå¸ˆ", "ä¸œåŒ—å¸ˆèŒƒå¤§å­¦"],
    "å»¶è¾¹å¤§å­¦": ["å»¶å¤§", "å»¶è¾¹å¤§å­¦"],
    "å¤§è¿æµ·äº‹å¤§å­¦": ["æµ·å¤§", "å¤§è¿æµ·äº‹å¤§å­¦"],
    "è¾½å®å¤§å­¦": ["è¾½å¤§", "è¾½å®å¤§å­¦"],
    "å“ˆå°”æ»¨å·¥ç¨‹å¤§å­¦": ["å“ˆå·¥ç¨‹", "å“ˆå°”æ»¨å·¥ç¨‹å¤§å­¦"],
    "ä¸œåŒ—æ—ä¸šå¤§å­¦": ["ä¸œæ—", "ä¸œåŒ—æ—ä¸šå¤§å­¦"],
    "ä¸œåŒ—å†œä¸šå¤§å­¦": ["ä¸œå†œ", "ä¸œåŒ—å†œä¸šå¤§å­¦"],
    "å®‰å¾½å¤§å­¦": ["å®‰å¤§", "å®‰å¾½å¤§å­¦"],
    "åˆè‚¥å·¥ä¸šå¤§å­¦": ["åˆå·¥å¤§", "åˆè‚¥å·¥ä¸šå¤§å­¦"],
    "å—æ˜Œå¤§å­¦": ["æ˜Œå¤§", "å—æ˜Œå¤§å­¦"],
    "éƒ‘å·å¤§å­¦": ["éƒ‘å¤§", "éƒ‘å·å¤§å­¦"],
    "æ­¦æ±‰ç†å·¥å¤§å­¦": ["æ­¦ç†", "æ­¦æ±‰ç†å·¥å¤§å­¦"],
    "åä¸­å†œä¸šå¤§å­¦": ["åå†œ", "åä¸­å†œä¸šå¤§å­¦"],
    "åä¸­å¸ˆèŒƒå¤§å­¦": ["åå¸ˆ", "åä¸­å¸ˆèŒƒå¤§å­¦"],
    "ä¸­å—è´¢ç»æ”¿æ³•å¤§å­¦": ["ä¸­å—è´¢", "ä¸­å—è´¢ç»æ”¿æ³•å¤§å­¦"],
    "å¹¿è¥¿å¤§å­¦": ["è¥¿å¤§", "å¹¿è¥¿å¤§å­¦"],
    "æµ·å—å¤§å­¦": ["æµ·å¤§", "æµ·å—å¤§å­¦"],
    "å†…è’™å¤å¤§å­¦": ["å†…å¤§", "å†…è’™å¤å¤§å­¦"],
    "å¤ªåŸç†å·¥å¤§å­¦": ["å¤ªç†", "å¤ªåŸç†å·¥å¤§å­¦"],
    "ç¦å·å¤§å­¦": ["ç¦å¤§", "ç¦å·å¤§å­¦"],
}

# æµ·å¤–çŸ¥åé™¢æ ¡ï¼ˆQS å‰ 100ï¼‰
OVERSEAS_TOP_SCHOOLS = {
    # ç¾å›½
    "MIT": ["MIT", "éº»çœç†å·¥", "Massachusetts Institute of Technology"],
    "Stanford University": ["Stanford", "æ–¯å¦ç¦", "æ–¯å¦ç¦å¤§å­¦"],
    "Harvard University": ["Harvard", "å“ˆä½›", "å“ˆä½›å¤§å­¦"],
    "California Institute of Technology": ["Caltech", "åŠ å·ç†å·¥", "åŠ å·ç†å·¥å­¦é™¢"],
    "University of Chicago": ["UChicago", "èŠåŠ å“¥å¤§å­¦"],
    "Princeton University": ["Princeton", "æ™®æ—æ–¯é¡¿", "æ™®æ—æ–¯é¡¿å¤§å­¦"],
    "Yale University": ["Yale", "è€¶é²", "è€¶é²å¤§å­¦"],
    "Columbia University": ["Columbia", "å“¥ä¼¦æ¯”äºšå¤§å­¦"],
    "University of Pennsylvania": ["UPenn", "å®¾å¤•æ³•å°¼äºšå¤§å­¦", "å®¾å¤§"],
    "Cornell University": ["Cornell", "åº·å¥ˆå°”å¤§å­¦"],
    "University of California, Berkeley": ["UC Berkeley", "ä¼¯å…‹åˆ©", "åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡"],
    "University of California, Los Angeles": ["UCLA", "åŠ å·å¤§å­¦æ´›æ‰çŸ¶åˆ†æ ¡"],
    # è‹±å›½
    "University of Cambridge": ["Cambridge", "å‰‘æ¡¥", "å‰‘æ¡¥å¤§å­¦"],
    "University of Oxford": ["Oxford", "ç‰›æ´¥", "ç‰›æ´¥å¤§å­¦"],
    "Imperial College London": ["IC", "å¸å›½ç†å·¥", "å¸å›½ç†å·¥å­¦é™¢"],
    "University College London": ["UCL", "ä¼¦æ•¦å¤§å­¦å­¦é™¢"],
    "London School of Economics": ["LSE", "ä¼¦æ•¦æ”¿ç»", "ä¼¦æ•¦æ”¿æ²»ç»æµå­¦é™¢"],
    # å…¶ä»–
    "ETH Zurich": ["ETH", "è‹é»ä¸–è”é‚¦ç†å·¥", "è‹é»ä¸–è”é‚¦ç†å·¥å­¦é™¢"],
    "National University of Singapore": ["NUS", "æ–°åŠ å¡å›½ç«‹å¤§å­¦"],
    "Nanyang Technological University": ["NTU", "å—æ´‹ç†å·¥å¤§å­¦"],
    "University of Toronto": ["U of T", "å¤šä¼¦å¤šå¤§å­¦"],
    "University of Melbourne": ["å¢¨å°”æœ¬å¤§å­¦"],
    "University of Sydney": ["æ‚‰å°¼å¤§å­¦"],
    "University of Hong Kong": ["HKU", "é¦™æ¸¯å¤§å­¦"],
    "Chinese University of Hong Kong": ["CUHK", "é¦™æ¸¯ä¸­æ–‡å¤§å­¦"],
    "Hong Kong University of Science and Technology": ["HKUST", "é¦™æ¸¯ç§‘æŠ€å¤§å­¦"],
}


def get_school_tier(school_name: str) -> str:
    """è·å–å­¦æ ¡çš„å±‚æ¬¡ã€‚

    Args:
        school_name: å­¦æ ¡åç§°ï¼ˆå…¨ç§°æˆ–ç®€ç§°ï¼‰

    Returns:
        str: å­¦æ ¡å±‚æ¬¡ï¼Œå¯èƒ½å€¼ï¼š
            - "985_211": 985 æˆ– 211 é™¢æ ¡
            - "overseas": æµ·å¤–çŸ¥åé™¢æ ¡
            - "ordinary": æ™®é€šå›½å†…é™¢æ ¡
    """
    if not school_name:
        return "ordinary"

    school_lower = school_name.lower().strip()

    # æ£€æŸ¥ 985
    for full_name, aliases in SCHOOLS_985.items():
        if any(alias.lower() in school_lower or school_lower in alias.lower() 
               for alias in aliases + [full_name]):
            return "985_211"

    # æ£€æŸ¥ 211ï¼ˆé 985ï¼‰
    for full_name, aliases in SCHOOLS_211_NON_985.items():
        if any(alias.lower() in school_lower or school_lower in alias.lower() 
               for alias in aliases + [full_name]):
            return "985_211"

    # æ£€æŸ¥æµ·å¤–çŸ¥åé™¢æ ¡
    for full_name, aliases in OVERSEAS_TOP_SCHOOLS.items():
        if any(alias.lower() in school_lower or school_lower in alias.lower() 
               for alias in aliases + [full_name]):
            return "overseas"

    # é»˜è®¤ä¸ºæ™®é€šå›½å†…é™¢æ ¡
    return "ordinary"


def check_school_tier_match(school_name: str, required_tier: str) -> bool:
    """æ£€æŸ¥å­¦æ ¡æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„å±‚æ¬¡è¦æ±‚ã€‚

    Args:
        school_name: å­¦æ ¡åç§°
        required_tier: è¦æ±‚çš„å­¦æ ¡å±‚æ¬¡ï¼ˆ985_211/overseas/ordinaryï¼‰

    Returns:
        bool: æ˜¯å¦ç¬¦åˆè¦æ±‚
    """
    school_tier = get_school_tier(school_name)
    return school_tier == required_tier
```

#### æ›´æ–° Schemaï¼ˆæ”¯æŒå¤šé€‰ï¼‰

**æ–‡ä»¶**: `src/schemas/condition.py`

```python
class SchoolTier(StrEnum):
    """å­¦æ ¡å±‚æ¬¡æšä¸¾ã€‚"""
    SCHOOLS_985_211 = "985_211"  # 985/211 é™¢æ ¡
    OVERSEAS = "overseas"        # æµ·å¤–çŸ¥åé™¢æ ¡
    ORDINARY = "ordinary"        # æ™®é€šå›½å†…é™¢æ ¡


# åœ¨ ConditionConfig ä¸­ä¿®æ”¹ school_tier å­—æ®µç±»å‹
class ConditionConfig(BaseModel):
    """ç­›é€‰æ¡ä»¶é…ç½®ã€‚"""
    
    # ... å…¶ä»–å­—æ®µ ...
    
    # ä¿®æ”¹ä¸ºåˆ—è¡¨ç±»å‹ï¼Œæ”¯æŒå¤šé€‰
    school_tier: list[SchoolTier] | None = Field(
        default=None,
        description="å­¦æ ¡å±‚æ¬¡è¦æ±‚ï¼ˆæ”¯æŒå¤šé€‰ï¼‰",
        examples=[["985_211"], ["985_211", "overseas"]],
    )
```

#### æ›´æ–°å‰ç«¯è¡¨å•ï¼ˆæ”¯æŒå¤šé€‰ï¼‰

**æ–‡ä»¶**: `frontend-new/js/pages/conditions.js`

```html
<div class="form-group">
    <label class="form-label">å­¦æ ¡å±‚æ¬¡ï¼ˆå¯å¤šé€‰ï¼‰</label>
    <div class="checkbox-group" id="schoolTierGroup">
        <label class="checkbox-label">
            <input type="checkbox" name="schoolTier" value="985_211">
            <span>985/211 é™¢æ ¡</span>
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="schoolTier" value="overseas">
            <span>æµ·å¤–çŸ¥åé™¢æ ¡</span>
        </label>
        <label class="checkbox-label">
            <input type="checkbox" name="schoolTier" value="ordinary">
            <span>æ™®é€šå›½å†…é™¢æ ¡</span>
        </label>
    </div>
</div>
```

#### æ›´æ–°å­¦æ ¡å±‚æ¬¡åŒ¹é…å‡½æ•°ï¼ˆæ”¯æŒå¤šé€‰ï¼‰

**æ–‡ä»¶**: `src/utils/school_tier_data.py`

```python
def check_school_tier_match(school_name: str, required_tiers: list[str]) -> bool:
    """æ£€æŸ¥å­¦æ ¡æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„å±‚æ¬¡è¦æ±‚ï¼ˆæ”¯æŒå¤šé€‰ï¼‰ã€‚

    Args:
        school_name: å­¦æ ¡åç§°
        required_tiers: è¦æ±‚çš„å­¦æ ¡å±‚æ¬¡åˆ—è¡¨ï¼ˆå¦‚ ["985_211", "overseas"]ï¼‰

    Returns:
        bool: æ˜¯å¦ç¬¦åˆä»»ä¸€è¦æ±‚
    """
    if not required_tiers:
        return True  # æ²¡æœ‰è¦æ±‚ï¼Œé»˜è®¤é€šè¿‡
    
    school_tier = get_school_tier(school_name)
    return school_tier in required_tiers
```

#### æ›´æ–° FilterNodeï¼ˆæ”¯æŒå¤šé€‰ï¼‰

**æ–‡ä»¶**: `src/workflows/filter_node.py`

```python
from src.utils.school_tier_data import check_school_tier_match

def _quick_filter(
    candidate_info: dict[str, Any],
    condition_config: dict[str, Any],
) -> FilterResult | None:
    """å¿«é€Ÿé¢„ç­›é€‰ã€‚"""
    unmatched: list[str] = []
    matched: list[str] = []

    # ... ç°æœ‰é€»è¾‘ ...

    # å­¦æ ¡å±‚æ¬¡ç­›é€‰ï¼ˆæ”¯æŒå¤šé€‰ï¼‰
    school_tiers = condition_config.get("school_tier")
    if school_tiers:  # åˆ—è¡¨ç±»å‹
        candidate_school = candidate_info.get("school", "")
        if check_school_tier_match(candidate_school, school_tiers):
            matched.append(f"å­¦æ ¡å±‚æ¬¡ç¬¦åˆ: {candidate_school}")
        else:
            unmatched.append(f"å­¦æ ¡å±‚æ¬¡ä¸ç¬¦åˆ: {candidate_school}")

    # ... è¿”å›ç»“æœ ...
```

#### æ›´æ–°æç¤ºè¯æ„å»ºï¼ˆæ”¯æŒå¤šé€‰ï¼‰

**æ–‡ä»¶**: `src/workflows/filter_node.py`

```python
def _build_filter_prompt(
    candidate_info: dict[str, Any],
    condition_config: dict[str, Any],
) -> tuple[str, str]:
    """æ„å»ºç­›é€‰æç¤ºè¯ã€‚"""
    # ...
    
    school_tiers = condition_config.get("school_tier")
    if school_tiers:
        tier_text_map = {
            "985_211": "985/211 é™¢æ ¡",
            "overseas": "æµ·å¤–çŸ¥åé™¢æ ¡",
            "ordinary": "æ™®é€šå›½å†…é™¢æ ¡",
        }
        tier_texts = [tier_text_map.get(t, t) for t in school_tiers]
        conditions_desc.append(f"é™¢æ ¡å±‚æ¬¡è¦æ±‚: {' æˆ– '.join(tier_texts)}")
    
    # ...
```

## äº”ã€éªŒè¯æ–¹æ¡ˆ

### 5.1 æµ‹è¯•ç”¨ä¾‹

#### æµ‹è¯• 1ï¼šå•æ¡ä»¶ç­›é€‰ï¼ˆå‘åå…¼å®¹ï¼‰

1. åˆ›å»ºä¸€ä¸ªç­›é€‰æ¡ä»¶ï¼šå·¥ä½œå¹´é™ >= 5 å¹´
2. ä¸Šä¼ ä¸€ä»½ 3 å¹´ç»éªŒçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆå·¥ä½œå¹´é™ä¸è¶³ï¼‰

#### æµ‹è¯• 2ï¼šæ¡ä»¶ç»„å†…é€»è¾‘ï¼ˆANDï¼‰

1. åˆ›å»ºä¸¤ä¸ªç­›é€‰æ¡ä»¶ï¼š
   - æ¡ä»¶ Aï¼šå·¥ä½œå¹´é™ >= 5 å¹´
   - æ¡ä»¶ Bï¼šå­¦å† >= ç¡•å£«
2. é€‰æ‹©æ¡ä»¶ A å’Œ Bï¼Œç»„å†…é€»è¾‘ AND
3. ä¸Šä¼ ä¸€ä»½ 6 å¹´ç»éªŒ + æœ¬ç§‘å­¦å†çš„ç®€å†
4. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆå­¦å†ä¸è¶³ï¼‰

#### æµ‹è¯• 3ï¼šæ¡ä»¶ç»„å†…é€»è¾‘ï¼ˆORï¼‰

1. åˆ›å»ºä¸¤ä¸ªç­›é€‰æ¡ä»¶ï¼š
   - æ¡ä»¶ Aï¼šå·¥ä½œå¹´é™ >= 5 å¹´
   - æ¡ä»¶ Bï¼šå­¦å† >= ç¡•å£«
2. é€‰æ‹©æ¡ä»¶ A å’Œ Bï¼Œç»„å†…é€»è¾‘ OR
3. ä¸Šä¼ ä¸€ä»½ 6 å¹´ç»éªŒ + æœ¬ç§‘å­¦å†çš„ç®€å†
4. é¢„æœŸç»“æœï¼š**é€šè¿‡**ï¼ˆæ»¡è¶³æ¡ä»¶ Aï¼‰

#### æµ‹è¯• 4ï¼šç»„é—´é€»è¾‘ï¼ˆANDï¼‰

1. åˆ›å»ºä¸‰ä¸ªç­›é€‰æ¡ä»¶ï¼š
   - æ¡ä»¶ Aï¼šå·¥ä½œå¹´é™ >= 3 å¹´
   - æ¡ä»¶ Bï¼šå­¦å† >= æœ¬ç§‘
   - æ¡ä»¶ Cï¼šæŠ€èƒ½åŒ…å« Python
2. æ¡ä»¶ç»„ 1ï¼šæ¡ä»¶ Aï¼ˆANDï¼‰
3. æ¡ä»¶ç»„ 2ï¼šæ¡ä»¶ Bï¼ˆANDï¼‰
4. ç»„é—´é€»è¾‘ï¼šAND
5. ä¸Šä¼ ä¸€ä»½ 4 å¹´ç»éªŒ + æœ¬ç§‘å­¦å† + æ—  Python æŠ€èƒ½çš„ç®€å†
6. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆä¸æ»¡è¶³æ¡ä»¶ Cï¼‰

#### æµ‹è¯• 5ï¼šç»„é—´é€»è¾‘ï¼ˆORï¼‰

1. åˆ›å»ºä¸¤ä¸ªç­›é€‰æ¡ä»¶ï¼š
   - æ¡ä»¶ Aï¼šå·¥ä½œå¹´é™ >= 5 å¹´
   - æ¡ä»¶ Bï¼šå­¦å† >= ç¡•å£«
2. æ¡ä»¶ç»„ 1ï¼šæ¡ä»¶ Aï¼ˆANDï¼‰
3. æ¡ä»¶ç»„ 2ï¼šæ¡ä»¶ Bï¼ˆANDï¼‰
4. ç»„é—´é€»è¾‘ï¼šOR
5. ä¸Šä¼ ä¸€ä»½ 3 å¹´ç»éªŒ + ç¡•å£«å­¦å†çš„ç®€å†
6. é¢„æœŸç»“æœï¼š**é€šè¿‡**ï¼ˆæ»¡è¶³æ¡ä»¶ç»„ 2ï¼‰

#### æµ‹è¯• 6ï¼šæ’é™¤æ¡ä»¶ï¼ˆNOTï¼‰

1. åˆ›å»ºä¸¤ä¸ªç­›é€‰æ¡ä»¶ï¼š
   - æ¡ä»¶ Aï¼šå·¥ä½œå¹´é™ >= 5 å¹´
   - æ¡ä»¶ Bï¼šå­¦å† >= ç¡•å£«
2. é€‰æ‹©æ¡ä»¶ Aï¼Œæ·»åŠ æ’é™¤æ¡ä»¶ B
3. ä¸Šä¼ ä¸€ä»½ 6 å¹´ç»éªŒ + ç¡•å£«å­¦å†çš„ç®€å†
4. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆè¢«æ’é™¤æ¡ä»¶è¿‡æ»¤ï¼‰

---

### ğŸ”§ æ–°å¢æµ‹è¯•ç”¨ä¾‹

#### æµ‹è¯• 7ï¼šå­¦æ ¡å±‚æ¬¡ç­›é€‰ - é¡¶å°–é™¢æ ¡ï¼ˆtopï¼‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šå­¦æ ¡å±‚æ¬¡ = é¡¶å°–é™¢æ ¡ï¼ˆ985/C9ï¼‰
2. ä¸Šä¼ ä¸€ä»½æ¸…åå¤§å­¦æ¯•ä¸šçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½æ™®é€šæœ¬ç§‘é™¢æ ¡çš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**

#### æµ‹è¯• 8ï¼šå­¦æ ¡å±‚æ¬¡ç­›é€‰ - é‡ç‚¹é™¢æ ¡ï¼ˆkeyï¼‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šå­¦æ ¡å±‚æ¬¡ = é‡ç‚¹é™¢æ ¡ï¼ˆ211ï¼‰
2. ä¸Šä¼ ä¸€ä»½ 211 é™¢æ ¡æ¯•ä¸šçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½é 211 é™¢æ ¡çš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**

#### æµ‹è¯• 9ï¼šå­¦æ ¡å±‚æ¬¡ç­›é€‰ - æ™®é€šé™¢æ ¡ï¼ˆordinaryï¼‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šå­¦æ ¡å±‚æ¬¡ = æ™®é€šé™¢æ ¡
2. ä¸Šä¼ ä¸€ä»½æ™®é€šæœ¬ç§‘é™¢æ ¡æ¯•ä¸šçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½ 985 é™¢æ ¡çš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**

#### æµ‹è¯• 10ï¼šå­¦æ ¡å±‚æ¬¡ç­›é€‰ - æµ·å¤–é™¢æ ¡ï¼ˆoverseasï¼‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šå­¦æ ¡å±‚æ¬¡ = æµ·å¤–é™¢æ ¡
2. ä¸Šä¼ ä¸€ä»½ MIT æ¯•ä¸šçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½å›½å†…æ™®é€šé™¢æ ¡çš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**

#### æµ‹è¯• 11ï¼šæŠ€èƒ½ç­›é€‰ï¼ˆå¿«é€Ÿç­›é€‰ï¼‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šæŠ€èƒ½ = Python, Java, SQL
2. ä¸Šä¼ ä¸€ä»½åŒ…å« Python å’Œ Java æŠ€èƒ½çš„ç®€å†
3. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆç¼ºå°‘ SQLï¼‰
4. ä¸Šä¼ ä¸€ä»½åŒ…å« Pythonã€Javaã€SQL æŠ€èƒ½çš„ç®€å†
5. é¢„æœŸç»“æœï¼š**é€šè¿‡**

#### æµ‹è¯• 12ï¼šä¸“ä¸šç­›é€‰ï¼ˆå¿«é€Ÿç­›é€‰ï¼‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šä¸“ä¸š = è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯, è½¯ä»¶å·¥ç¨‹
2. ä¸Šä¼ ä¸€ä»½"è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯"ä¸“ä¸šçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½"ç”µå­å·¥ç¨‹"ä¸“ä¸šçš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**

#### æµ‹è¯• 13ï¼šå·¥ä½œå¹´é™èŒƒå›´ç­›é€‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼šå·¥ä½œå¹´é™ 3-5 å¹´
   - `experience_years: 3`
   - `experience_years_max: 5`
2. ä¸Šä¼ ä¸€ä»½ 4 å¹´ç»éªŒçš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½ 2 å¹´ç»éªŒçš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆå¹´é™ä¸è¶³ï¼‰
6. ä¸Šä¼ ä¸€ä»½ 6 å¹´ç»éªŒçš„ç®€å†
7. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆå¹´é™è¶…é™ï¼‰

#### æµ‹è¯• 14ï¼šå¤šæ¡ä»¶ç»„åˆç­›é€‰

1. åˆ›å»ºç­›é€‰æ¡ä»¶ï¼š
   - å­¦å† >= æœ¬ç§‘
   - å·¥ä½œå¹´é™ >= 3 å¹´
   - æŠ€èƒ½åŒ…å« Python
   - å­¦æ ¡å±‚æ¬¡ = é‡ç‚¹é™¢æ ¡ï¼ˆ211ï¼‰
2. ä¸Šä¼ ä¸€ä»½ï¼šæœ¬ç§‘ + 4 å¹´ç»éªŒ + ä¼š Python + 211 é™¢æ ¡çš„ç®€å†
3. é¢„æœŸç»“æœï¼š**é€šè¿‡**
4. ä¸Šä¼ ä¸€ä»½ï¼šç¡•å£« + 2 å¹´ç»éªŒ + ä¼š Python + 211 é™¢æ ¡çš„ç®€å†
5. é¢„æœŸç»“æœï¼š**æœªé€šè¿‡**ï¼ˆå·¥ä½œå¹´é™ä¸è¶³ï¼‰

### 5.2 å›å½’æµ‹è¯•

ç¡®ä¿ä¿®æ”¹ä¸å½±å“ç°æœ‰åŠŸèƒ½ï¼š
- å•ä¸ªæ¡ä»¶ ID çš„ç­›é€‰ä»ç„¶æ­£å¸¸å·¥ä½œ
- æ— ç­›é€‰æ¡ä»¶çš„ç®€å†ä¸Šä¼ æ­£å¸¸å·¥ä½œ
- æ‰¹é‡ä¸Šä¼ åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- å­¦æ ¡å±‚æ¬¡ç­›é€‰ä¸ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯

### 5.3 æ€§èƒ½æµ‹è¯•

- å¿«é€Ÿç­›é€‰å‘½ä¸­ç‡æµ‹è¯•ï¼šç¡®ä¿å¤§éƒ¨åˆ†ç®€å•æ¡ä»¶èƒ½è¢«å¿«é€Ÿç­›é€‰å¤„ç†
- LLM è°ƒç”¨æ¬¡æ•°æµ‹è¯•ï¼šç¡®ä¿ä¸å¿…è¦çš„ LLM è°ƒç”¨è¢«é¿å…

## å…­ã€é£é™©è¯„ä¼°

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|--------|------|---------|
| å‘åå…¼å®¹æ€§ç ´å | ä½ | é«˜ | ä¿ç•™ `condition_id` å‚æ•°ï¼Œä¼˜å…ˆä½¿ç”¨ `filter_config` |
| æ€§èƒ½ä¸‹é™ | ä¸­ | ä¸­ | æ‰¹é‡åŠ è½½æ¡ä»¶é…ç½®ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢ |
| LLM è°ƒç”¨å¢åŠ  | ä¸­ | ä¸­ | ä¼˜åŒ–å¿«é€Ÿé¢„ç­›é€‰é€»è¾‘ï¼Œå‡å°‘ LLM è°ƒç”¨ |

## ä¸ƒã€å®æ–½æ­¥éª¤

1. **ç¬¬ä¸€é˜¶æ®µï¼šå‰ç«¯ä¿®æ”¹**
   - ä¿®æ”¹ `api.js` çš„ `batchUpload` æ–¹æ³•
   - ä¿®æ”¹ `upload.js` çš„ `submitScreening` æ–¹æ³•
   - æµ‹è¯•å‰ç«¯æ•°æ®ä¼ é€’

2. **ç¬¬äºŒé˜¶æ®µï¼šåç«¯ Schema å’Œ API**
   - æ–°å¢ `FilterConfigRequest` æ¨¡å‹
   - ä¿®æ”¹ `batch_upload` å’Œ `upload_and_screen` æ¥å£
   - æµ‹è¯• API æ¥æ”¶

3. **ç¬¬ä¸‰é˜¶æ®µï¼šå·¥ä½œæµå’Œ FilterNode**
   - ä¿®æ”¹ `ResumeState` æ–°å¢ `filter_config` å­—æ®µ
   - ä¿®æ”¹ `run_resume_workflow` æ”¯æŒå¤æ‚é…ç½®
   - é‡æ„ `filter_node` å®ç°å¤æ‚ç­›é€‰é€»è¾‘
   - æµ‹è¯•å®Œæ•´ç­›é€‰æµç¨‹

4. **ç¬¬å››é˜¶æ®µï¼šé›†æˆæµ‹è¯•**
   - æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
   - å›å½’æµ‹è¯•
   - æ€§èƒ½æµ‹è¯•

## å…«ã€é¢„æœŸæˆæœ

ä¿®å¤å®Œæˆåï¼Œç®€å†ä¸Šä¼ é¡µé¢å°†æ”¯æŒä»¥ä¸‹é«˜çº§ç­›é€‰åŠŸèƒ½ï¼š

1. **å¤šæ¡ä»¶ç»„åˆç­›é€‰**ï¼šå¯é€‰æ‹©å¤šä¸ªç­›é€‰æ¡ä»¶
2. **æ¡ä»¶ç»„å†…é€»è¾‘**ï¼šæ”¯æŒ AND/OR é€»è¾‘
3. **ç»„é—´é€»è¾‘**ï¼šæ”¯æŒå¤šä¸ªæ¡ä»¶ç»„ä¹‹é—´çš„ AND/OR é€»è¾‘
4. **æ’é™¤æ¡ä»¶**ï¼šæ”¯æŒ NOT é€»è¾‘æ’é™¤ç‰¹å®šå€™é€‰äºº
5. **å‘åå…¼å®¹**ï¼šå•ä¸ªæ¡ä»¶ ID çš„ç­›é€‰ä»ç„¶æ­£å¸¸å·¥ä½œ
