# 人才信息页面优化计划

## 问题概述

用户反馈 `http://localhost:3000/#/talents` 页面存在以下问题：
1. 两个地方都写着"筛选条件"，造成混淆
2. 没有 AND/OR/NOT 逻辑选项
3. 没有多选功能，无法批量删除或批量修改状态
4. 缺少编辑功能，无法修改人才信息

## 解决方案

### 1. 修复重复"筛选条件"标签

**问题定位**：
- 第201行：`<h3 class="card-title">筛选条件</h3>` - 卡片标题
- 第232行：`<label class="form-label">筛选条件</label>` - 选择框标签

**解决方案**：
- 将卡片标题改为"搜索筛选"
- 将选择框标签改为"预设条件"

### 2. 添加 AND/OR 逻辑选项

**设计方案**：
- 为姓名、专业、院校、筛选状态字段添加逻辑连接符
- 支持简单的条件组合：
  - AND（且）：所有条件都满足
  - OR（或）：任一条件满足

**UI 设计**：
```
┌─────────────────────────────────────────────────────────┐
│ 搜索筛选                                                │
├─────────────────────────────────────────────────────────┤
│ 逻辑: [AND ▼] (所有条件都满足 / 任一条件满足)            │
│                                                         │
│ 姓名        专业        院校        筛选状态             │
│ [_______]  [_______]  [_______]   [全部 ▼]             │
│                                                         │
│ 预设条件: [不限 ▼]                                      │
│                                                         │
│                    [重置] [查询]                        │
└─────────────────────────────────────────────────────────┘
```

### 3. 添加多选和批量操作功能

**功能设计**：

#### 3.1 表格多选
- 添加表头复选框（全选/取消全选）
- 添加每行复选框
- 显示已选数量

#### 3.2 批量操作工具栏
- 当有选中项时显示批量操作工具栏
- 操作按钮：
  - 批量删除
  - 批量标记为通过
  - 批量标记为未通过

**UI 设计**：
```
┌─────────────────────────────────────────────────────────┐
│ ☑ 姓名  学历  院校  专业  工作年限  筛选状态  筛选日期  操作 │
├─────────────────────────────────────────────────────────┤
│ ☑ 刘开焜 本科  贵州财经大学 金融学  6年  通过  2026-02-22 [查看][编辑][删除] │
│ ☐ 张三   硕士  清华大学   计算机科学  3年  未通过 2026-02-21 [查看][编辑][删除] │
└─────────────────────────────────────────────────────────┘

已选择 1 项  [批量删除] [批量标记通过] [批量标记未通过]
```

### 4. 添加人才信息编辑功能

**功能设计**：

#### 4.1 编辑入口
- 在操作列添加"编辑"按钮
- 点击后打开编辑模态框

#### 4.2 编辑表单字段
- 姓名（文本）
- 学历（下拉选择：博士/硕士/本科/大专/高中及以下）
- 院校（文本）
- 专业（文本）
- 工作年限（数字）
- 联系电话（文本）
- 电子邮箱（文本）
- 毕业日期（日期）
- 技能标签（标签输入，支持多个）
- 筛选状态（下拉选择：通过/未通过）

#### 4.3 编辑模态框 UI
```
┌─────────────────────────────────────────────────────────┐
│ 编辑人才信息                                      [×]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 姓名: [____________]     学历: [本科 ▼]                │
│                                                         │
│ 院校: [____________]     专业: [____________]          │
│                                                         │
│ 工作年限: [___] 年       毕业日期: [____-__-__]        │
│                                                         │
│ 联系电话: [____________]  电子邮箱: [____________]      │
│                                                         │
│ 筛选状态: [通过 ▼]                                      │
│                                                         │
│ 技能标签:                                               │
│ [Python] [Java] [SQL] [+ 添加技能]                     │
│                                                         │
│                              [取消] [保存]              │
└─────────────────────────────────────────────────────────┘
```

## 实现步骤

### 步骤 1：修改前端 talents.js

1. **修复重复标签**
   - 将卡片标题改为"搜索筛选"
   - 将"筛选条件"选择框标签改为"预设条件"

2. **添加逻辑选项**
   - 在 filters 对象中添加 `logic: 'and'` 属性
   - 添加逻辑选择下拉框
   - 修改 API 调用，传递 logic 参数

3. **添加多选功能**
   - 添加 `selectedIds: Set` 存储选中项
   - 添加表头全选复选框
   - 添加每行复选框
   - 添加批量操作工具栏

4. **添加批量操作方法**
   - `toggleSelectAll()` - 全选/取消全选
   - `toggleSelect(id)` - 切换单个选中
   - `batchDelete()` - 批量删除
   - `batchUpdateStatus(status)` - 批量更新状态

5. **添加编辑功能**
   - `showEditModal(id)` - 显示编辑模态框
   - `renderEditModal(talent)` - 渲染编辑表单
   - `saveEdit()` - 保存编辑
   - 添加技能标签输入组件

### 步骤 2：修改后端 API

1. **修改 talents.py 的查询接口**
   - 添加 `logic` 参数支持
   - 根据 logic 值使用 AND 或 OR 连接条件

2. **添加批量操作接口**
   - `POST /api/v1/talents/batch-delete` - 批量删除
   - `POST /api/v1/talents/batch-update-status` - 批量更新状态

3. **添加更新接口**
   - `PUT /api/v1/talents/{id}` - 更新人才信息

### 步骤 3：添加 Schema

1. **添加请求/响应模型**
   - `TalentUpdateRequest` - 更新请求模型
   - `BatchDeleteRequest` - 批量删除请求模型
   - `BatchUpdateStatusRequest` - 批量更新状态请求模型

### 步骤 4：添加样式

- 批量操作工具栏样式
- 复选框样式
- 选中行高亮样式
- 编辑表单样式
- 技能标签输入样式

## 文件修改清单

| 文件 | 修改内容 |
|------|----------|
| `frontend-new/js/pages/talents.js` | 前端页面逻辑修改 |
| `src/api/v1/talents.py` | 后端 API 修改 |
| `src/schemas/talent.py` | 添加请求/响应模型 |
| `src/services/talent_service.py` | 添加更新、批量操作服务方法 |

## 预估工作量

- 前端修改：约 250 行代码
- 后端修改：约 120 行代码
- 测试验证：功能测试
